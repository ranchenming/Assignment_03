---
title: "assignment 03"
author: "Chenming Ran"
date: "2/13/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r load-packages, message=TRUE, warning=TRUE, paged.print=TRUE}
library(tidyverse)
library(haven)
```
```{r import data}
trade <- read_stata("us_trade_data.dta")
head(trade,10)
```
```{r create tible}
trade_1 <- trade %>%
  filter(is.na(trade_value) == FALSE) %>% 
  group_by(year, trade_type) %>%
  summarize(trade_value = mean(trade_value))

trade_1$trade_type[trade_1$trade_type == "Total Exports"] <- "Export" 
trade_1$trade_type[trade_1$trade_type == "Total Imports"] <- "Import" 

head(trade_1,10)
```
```{r reshape data}
trade_2 <- trade_1 %>%
    pivot_wider(id_cols = year, names_from = trade_type, values_from = trade_value)
head(trade_2,10)
```

```{r bar graph1}
ggplot(data=trade_1, aes(x=year, y=trade_value)) +
  geom_bar(stat="identity", fill="steelblue")+
  theme_minimal()
```

```{r line graph}
ggplot(data = trade_2, aes(year)) + 
  geom_line(aes(y = Export, colour = "blue")) + 
  geom_line(aes(y = Import, colour = "read"))
```